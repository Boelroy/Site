---
author: admin
comments: true
date: 2013-07-13 17:17:55+00:00
layout: post
slug: '%e8%ae%b0%e5%bd%95%ef%bc%9a%e7%94%a8python%e5%86%99%e7%88%ac%e8%99%ab1'
title: 记录：用python写爬虫(1)
wordpress_id: 52
categories:
- python
- 爬虫
---

最近一直在渣打实习(不过，与其说是实习还不如说是实训，学校安排，没有工资...)。所以在公司闲下来的时候就想找点事来做。刚好前几周同学做了一个从网上抓取课程表的小程序，所以自己就想起来写一个爬虫来练练手。

不过对于java和c++这样的语言写起这些来总觉得会有点点过于麻烦，刚好最近在看python的东西，所幸就拿python写一个爬虫的小脚本。


### 如何开始


其实爬虫就是根据特定的url的规则去获取web页面然后解析，所以就来到了两个问题如何根据url获取页面，如何解析。


#### 如何获取页面


想要快速的获取某个页面可以用到python的标准库urllib2

[python]
import urllib2

response = urllib2.urlopen("http://www.google.com.hk")
response.read()
[/python]

这样你就可以在命令行中看到google首页的网页源码。


#### 如何解析页面


说到解析大部分的时间我们都可以通过正则表达是来解决。但是写出一个好的正则是一件很挑战的事，所以这里推荐一个可以以jquery的selector 的方式来获取特定元素来解析页面的python库-----PyQuery


> PyQuery的安装:

Mac下可以直接通过 sudo easy_install pyquery进行安装

Linux可以参考   [这里](http://www.cnblogs.com/sliverdang/archive/2011/09/05/2167760.html)

Windows 因为不用window 所以这里就无法给出方法-_-!


PyQuery最大的特点就是，当我们熟练的掌握了jQuery选择器的就能很快的对这个库中的函数进行运用。从而省去的我们大部分写正则表达式的时间。如 Pyquery("#name").find("li") 就是找到Dom中id为name 的元素下的所有li节点。

下面是PyQuery更完整的用法

[python]import urllib2
from pyquery import PyQuery as pyq

document = pyq(urllib2.urlopen("http://www.google.com.hk").read())
div = document("div")
print div
[/python]

至此我们就可以很简单的从一个url解析出我们想要的网页中的有效的信息
